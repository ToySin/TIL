참고 페이지
https://techblog.woowahan.com/2637/

# 멀티 모듈
- 독립적으로 실행 가능한 어플리케이션을 1개 이상 가진다.
- 이게 무슨 말이니?

# 모듈은 어떻게
- 독립적으로 운영될 수 있는 구성요소 단위
- 동의서 서비스로 생각해보면:
  - 지점등록은 시스템 관리자가 하는 일
  - 회원 검색이나 통계성 정보는 지점 관리자가 하는 일
  - 그리고 동의서 등록은 회원이 하는 일
- 이런 식으로 나눠볼 수 있는 것 같다.

# 배민에서 소개하는 범용적인 멀티모듈 구조
1. 독립 모듈 계층
2. 도메인 모듈 계층
3. 내부 모듈 계층
4. 공통 모듈 계층
5. 어플리케이션 모듈 계층
### 독립 모듈 계층
- 비즈니스와 크게 상관없는 자체 개발 라이브러리들이 들어갈만하다.
- 나중에 더 좋은 라이브러리가 나오면 대체 가능해야하고, 쉽게 삭제할 수 있어야한다.
- 그러니 프로젝트 내에 의존관계를 두지 않아야한다.
### 공통 모듈 계층
- 공통되는 부분이 커질수록 시스템 관리가 어려워진다.
- 하지만 공통되는 부분은 무조건 존재는 한다.
- 그래서 Type이나 Util 같은것들을 정의하고 되도록이면 사용하지 않는다.
- 다른 모듈을 의존하지 않아야한다. 이 녀석이 의존성을 제공할 수는 있다.
### 도메인 모듈 계층
- 서비스 비즈니스를 몰라야한다.
- 하나의 모듈은 하나의 인프라스트럭처에만 책임을 갖는다.
- 도메인 모듈을 조합한 더 큰 도메인 모듈이 존재할 수 있다.
- 여기에 해당되는건:
  1. Domain. JPA 기준으로 테이블과 매핑되는 Entity Class가 예시다.
  2. Repository. 도메인의 CRUD의 역할이다. 그런데 모든 CRUD가 해당하는게 아니다.
     - 핵심 도메인 기능에 해당되면 괜찮지만, 그다지 중요하지 않은 통계성 조회나 처리라면 도메인 모듈에서 빼야한다.
     - 배민에서는 주문이 핵심 도메인이라면, 통계는 어플리케이션 모듈에 작성한다고 설명한다.
  3. Service. 비즈니스의 핵심이다. 여기서 트랜잭션의 단위를 정의, 요청 데이터를 검증, 이벤트 발생을 수행한다.
- RDBMS랑 Redis를 같이쓰면 도메인을 분리하라고 설명한다. 아마도 spring-boot-starter-data-jpa/redis 두개가 충돌이 있나보다. (아직 안해봐서 모르겠다!!!)
### 내부 모듈 계층
- 독립 모듈 계층은 시스템에도 전혀 연관되지 않았다.
- 이 계층은 시스템과는 연관이 있는 모듈이다. 어플리케이션과 도메인 비즈니스를 몰라야한다.
- 전체적인 기능을 서포트하기 위한 기능 모듈이 생성될 수 있다.
- SQS로 이벤트를 전송하거나 로그를 남기는 행위를 처리한다.
- 혹은 web 설정을 할 수도 있다. Web Filter 같은 보안같은 그런.
### 어플리케이션 모듈 계층
- 하위 설계했던 모듈들을 조립해서 비즈니스를 완성시킨다.
